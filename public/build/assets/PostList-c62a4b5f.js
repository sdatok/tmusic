import{r as e,j as i}from"./app-eb26a8d9.js";import{P as C}from"./PostItem-2261fb4e.js";const f=({posts:u,user:l,spotifyUserProfile:r})=>{const[c,d]=e.useState(.5),[k,m]=e.useState({likes:[]}),[p,n]=e.useState({}),h=t=>{d(t)},x=(t,o)=>{n(s=>({...s,[t]:o}))};return e.useEffect(()=>{axios.post("/posts/totalLikes").then(t=>{const o=t.data.likeCounts.reduce((s,a)=>(s[a.post_id]=a.total_likes,s),{});n(o)}).catch(t=>console.error("Failed to fetch like counts:",t))},[]),e.useEffect(()=>{axios.post("/posts/likes").then(t=>{m(t.data)})},[]),i.jsx("div",{className:"px-6 md:px-12 lg:px-32",children:u.map(t=>i.jsx(C,{likeCount:p[t.id]||0,user:l,userLikes:k,post:t,spotifyUserProfile:r,volume:c,onVolumeChange:h,onLikeCountChange:x},t.id))})},j=f;export{j as default};
